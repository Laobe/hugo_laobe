{
  "title": "GraphDB查询语言",
  "cells": [
    {
      "type": "text",
      "data": "AQL<div>Cypher</div><div>Gremlin</div><div><br></div><div><br></div><div>AQL 是arangodb设计的查询语言，由于arangodb是定义为多模型的数据库，因此数据的存储都是基于文档型的，所以AQL语法中很大一部分是涉及到文档的CRUD。并且在语法风格上保持跟SQL很相似。</div><div>针对文档的存储模型，arangodb设计了database，collection，document，attribute 的模型。</div><div><table class=\"sla\" style=\"box-sizing: border-box; width: 498.15625px; padding: 0px; margin: 25px auto 0px; border-color: rgb(229, 228, 228); line-height: 20px; font-family: 'Open Sans Light', Helvetica, Arial, sans-serif;\"><tbody style=\"box-sizing: border-box; border-color: rgb(229, 228, 228); margin-bottom: 0px;\"><tr style=\"box-sizing: border-box; border-color: rgb(229, 228, 228); background-color: rgb(241, 241, 241);\"><td class=\"cellTitle\" width=\"50%\" style=\"box-sizing: border-box; padding: 5px; font-size: 16px; border: none; background-color: rgba(138, 160, 81, 0.8); margin: 3px;\">SQL</td><td class=\"cellTitle\" width=\"50%\" style=\"box-sizing: border-box; padding: 5px; font-size: 16px; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-color: rgb(251, 251, 251); margin: 3px 3px 0px; background-color: rgba(138, 160, 81, 0.8); text-align: center;\">AQL</td></tr><tr style=\"box-sizing: border-box; border-color: rgb(229, 228, 228); background-color: rgb(231, 231, 231);\"><td class=\"cellAttribute\" style=\"box-sizing: border-box; padding: 5px; font-size: 16px; border: none; background-color: transparent; margin: 3px;\">database</td><td class=\"cellValue\" style=\"box-sizing: border-box; padding: 5px; font-size: 16px; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-color: rgb(251, 251, 251); margin: 3px 3px 0px; background-color: transparent; text-align: center;\">database</td></tr><tr style=\"box-sizing: border-box; border-color: rgb(229, 228, 228); background-color: rgb(241, 241, 241);\"><td class=\"cellAttribute\" style=\"box-sizing: border-box; padding: 5px; font-size: 16px; border: none; background-color: transparent; margin: 3px;\">table</td><td class=\"cellValue\" style=\"box-sizing: border-box; padding: 5px; font-size: 16px; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-color: rgb(251, 251, 251); margin: 3px 3px 0px; background-color: transparent; text-align: center;\">collection</td></tr><tr style=\"box-sizing: border-box; border-color: rgb(229, 228, 228); background-color: rgb(231, 231, 231);\"><td class=\"cellAttribute\" style=\"box-sizing: border-box; padding: 5px; font-size: 16px; border: none; background-color: transparent; margin: 3px;\">row</td><td class=\"cellValue\" style=\"box-sizing: border-box; padding: 5px; font-size: 16px; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-color: rgb(251, 251, 251); margin: 3px 3px 0px; background-color: transparent; text-align: center;\">document</td></tr><tr style=\"box-sizing: border-box; border-color: rgb(229, 228, 228); background-color: rgb(241, 241, 241);\"><td class=\"cellAttribute\" style=\"box-sizing: border-box; padding: 5px; font-size: 16px; border: none; background-color: transparent; margin: 3px;\">column</td><td class=\"cellValue\" style=\"box-sizing: border-box; padding: 5px; font-size: 16px; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-color: rgb(251, 251, 251); margin: 3px 3px 0px; background-color: transparent; text-align: center;\">attribute</td></tr><tr style=\"box-sizing: border-box; border-color: rgb(229, 228, 228); background-color: rgb(231, 231, 231);\"><td class=\"cellAttribute\" style=\"box-sizing: border-box; padding: 5px; font-size: 16px; border: none; background-color: transparent; margin: 3px;\">table joins</td><td class=\"cellValue\" style=\"box-sizing: border-box; padding: 5px; font-size: 16px; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-color: rgb(251, 251, 251); margin: 3px 3px 0px; background-color: transparent; text-align: center;\">collection joins</td></tr><tr style=\"box-sizing: border-box; border-color: rgb(229, 228, 228); background-color: rgb(241, 241, 241);\"><td class=\"cellAttribute\" style=\"box-sizing: border-box; padding: 5px; font-size: 16px; border: none; background-color: transparent; margin: 3px;\">primary key</td><td class=\"cellValue\" style=\"box-sizing: border-box; padding: 5px; font-size: 16px; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-color: rgb(251, 251, 251); margin: 3px 3px 0px; background-color: transparent;\">primary key (automatically present on&nbsp;<code style=\"box-sizing: border-box; font-family: monospace, fixed; font-size: 14px; padding: 2px 10px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; line-height: 24.5px; margin-right: 1px; overflow: auto; word-wrap: break-word; background-color: rgb(251, 252, 253) !important; border: 1px solid rgb(229, 228, 228) !important; background-position: 0px 0px;\">_key</code>&nbsp;attribute)</td></tr><tr style=\"box-sizing: border-box; border-color: rgb(229, 228, 228); margin-bottom: 0px; background-color: rgb(231, 231, 231);\"><td class=\"cellAttribute\" style=\"box-sizing: border-box; padding: 5px; font-size: 16px; border: none; background-color: transparent; margin: 3px;\">index</td><td class=\"cellValue\" style=\"box-sizing: border-box; padding: 5px; font-size: 16px; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-color: rgb(251, 251, 251); margin: 3px 3px 0px; background-color: transparent; text-align: center;\">index</td></tr></tbody></table>在图模型的设计上，设计了vertex 和 edge 两个模型。这两个模型都是基于文档存储的，在edge中</div><div><br></div><div>Gremlin既是一个查询语言，又是一个计算框架，提供了很多图算法的计算能力。</div><div><br></div><div><br></div><div><br></div><div><p>#### 查询语言</p><p><a href=\"https://www.arangodb.com/wp-content/uploads/2016/05/shell-reference-card.pdf\">AQL</a>：ArangoDB自己定义的查询语言，由于是文档模型上设计的图模型因此很多语法都跟文档相关，有collection,document,edge的概念，文档的模式跟mongodb类似</p><p><a href=\"http://www.opencypher.org\">Cypher</a>: neo4j定义出来的一个想要成为图数据库标准的图模型描述语言，现在也比较受业界认可，除了neo4j之外，agensgraph也是在PostgreSQL是实现了cypher语法，另外也和databricks合作，将cypher在spark上集成了。</p><pre><code style=\"font-size: 13px;\">\n MATCH (d:Database)-[:USES]-\\&gt;(Cypher)-[:QUERIES]-\\&gt;(:Model:Graph)\n\n WHERE d.name IN ['SAP HANA Graph','Redis','AgensGraph', 'Neo4j',...]\n\n RETURN Cypher.features\n\n</code></pre><p>Gremlin: 这个语法更像是编程API，而不像查询语言。因此可以自己定义出更复杂的查询搜索功能</p><pre><code style=\"font-size: 13px;\">\n<pre class=\" language-gremlin\" style=\"box-sizing: border-box; overflow: auto; font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace; padding: 0em; margin-top: 0em; margin-bottom: 0em; line-height: 1.5; color: rgb(51, 122, 183); word-break: normal; word-wrap: normal; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; text-shadow: white 0px 0px; tab-size: 4; -webkit-hyphens: none;\"><code class=\" language-gremlin\" style=\"font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace; line-height: 1.5; font-size: inherit; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; background-image: none; box-sizing: border-box; text-shadow: white 0px 0px; word-spacing: normal; word-wrap: normal; tab-size: 4; -webkit-hyphens: none;\">  <span class=\"token comment\" spellcheck=\"true\" style=\"box-sizing: border-box; color: gray;\">// What is the distribution of job titles amongst Gremlin's collaborators?</span>\n    <span class=\"token traversalSource\" style=\"box-sizing: border-box; color: rgb(128, 0, 128);\">g</span><span class=\"token punctuation\" style=\"box-sizing: border-box; color: black;\">.</span><span class=\"token function\" style=\"box-sizing: border-box;\">V</span><span class=\"token punctuation\" style=\"box-sizing: border-box; color: black;\">(</span><span class=\"token punctuation\" style=\"box-sizing: border-box; color: black;\">)</span><span class=\"token punctuation\" style=\"box-sizing: border-box; color: black;\">.</span><span class=\"token function\" style=\"box-sizing: border-box;\">has</span><span class=\"token punctuation\" style=\"box-sizing: border-box; color: black;\">(</span><span class=\"token string\" style=\"box-sizing: border-box; color: rgb(102, 153, 0);\">\"name\"</span><span class=\"token punctuation\" style=\"box-sizing: border-box; color: black;\">,</span><span class=\"token string\" style=\"box-sizing: border-box; color: rgb(102, 153, 0);\">\"gremlin\"</span><span class=\"token punctuation\" style=\"box-sizing: border-box; color: black;\">)</span><span class=\"token punctuation\" style=\"box-sizing: border-box; color: black;\">.</span><span class=\"token function\" style=\"box-sizing: border-box;\">as</span><span class=\"token punctuation\" style=\"box-sizing: border-box; color: black;\">(</span><span class=\"token string\" style=\"box-sizing: border-box; color: rgb(102, 153, 0);\">\"a\"</span><span class=\"token punctuation\" style=\"box-sizing: border-box; color: black;\">)</span><span class=\"token punctuation\" style=\"box-sizing: border-box; color: black;\">.</span>\n      <span class=\"token function\" style=\"box-sizing: border-box;\">out</span><span class=\"token punctuation\" style=\"box-sizing: border-box; color: black;\">(</span><span class=\"token string\" style=\"box-sizing: border-box; color: rgb(102, 153, 0);\">\"created\"</span><span class=\"token punctuation\" style=\"box-sizing: border-box; color: black;\">)</span><span class=\"token punctuation\" style=\"box-sizing: border-box; color: black;\">.</span><span class=\"token function\" style=\"box-sizing: border-box;\">in</span><span class=\"token punctuation\" style=\"box-sizing: border-box; color: black;\">(</span><span class=\"token string\" style=\"box-sizing: border-box; color: rgb(102, 153, 0);\">\"created\"</span><span class=\"token punctuation\" style=\"box-sizing: border-box; color: black;\">)</span><span class=\"token punctuation\" style=\"box-sizing: border-box; color: black;\">.</span>\n        <span class=\"token function\" style=\"box-sizing: border-box;\">where</span><span class=\"token punctuation\" style=\"box-sizing: border-box; color: black;\">(</span><span class=\"token function\" style=\"box-sizing: border-box;\">neq</span><span class=\"token punctuation\" style=\"box-sizing: border-box; color: black;\">(</span><span class=\"token string\" style=\"box-sizing: border-box; color: rgb(102, 153, 0);\">\"a\"</span><span class=\"token punctuation\" style=\"box-sizing: border-box; color: black;\">)</span><span class=\"token punctuation\" style=\"box-sizing: border-box; color: black;\">)</span><span class=\"token punctuation\" style=\"box-sizing: border-box; color: black;\">.</span>\n      <span class=\"token function\" style=\"box-sizing: border-box;\">groupCount</span><span class=\"token punctuation\" style=\"box-sizing: border-box; color: black;\">(</span><span class=\"token punctuation\" style=\"box-sizing: border-box; color: black;\">)</span><span class=\"token punctuation\" style=\"box-sizing: border-box; color: black;\">.</span><span class=\"token function\" style=\"box-sizing: border-box;\">by</span><span class=\"token punctuation\" style=\"box-sizing: border-box; color: black;\">(</span><span class=\"token string\" style=\"box-sizing: border-box; color: rgb(102, 153, 0);\">\"title\"</span><span class=\"token punctuation\" style=\"box-sizing: border-box; color: black;\">)</span>\n</code></pre><div><br></div></code></pre><p>MongoDB CRUD: mongodb是文档数据库，其主要概念就是collection和document，crud操作也是基于这两个概念，并且由于文档直接的关联概念比较小，不像图模型中处处存在联系，因此关联查询那块比较弱，也不会主要有MATCH那个概念。</p></div>"
    }
  ]
}